<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>共识知识库(CKB) - 三层金字塔结构</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #0f0f23, #1a1a2e, #2d1b69);
            color: #ffffff;
            overflow-x: hidden;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 40px 0;
        }

        .title {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, #ffd700, #ffed4e, #fff59d);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradient 4s ease infinite;
            margin-bottom: 20px;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .subtitle {
            font-size: 1.1rem;
            color: #cccccc;
            margin-bottom: 40px;
        }

        .pyramid-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 60px 0;
            perspective: 1000px;
        }

        .pyramid {
            position: relative;
            width: 400px;
            height: 300px;
            transform-style: preserve-3d;
            animation: rotate 15s linear infinite;
        }

        @keyframes rotate {
            0% { transform: rotateY(0deg) rotateX(-10deg); }
            100% { transform: rotateY(360deg) rotateX(-10deg); }
        }

        .pyramid-level {
            position: absolute;
            border: 2px solid;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }

        .pyramid-level:hover {
            transform: scale(1.1);
            box-shadow: 0 15px 30px rgba(255, 255, 255, 0.2);
        }

        .level-3 { /* 底层 - 基础共识层 */
            width: 350px;
            height: 80px;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 237, 78, 0.1));
            border-color: #ffd700;
            color: #ffd700;
        }

        .level-2 { /* 中层 - 领域共识层 */
            width: 250px;
            height: 70px;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, rgba(255, 140, 0, 0.2), rgba(255, 165, 0, 0.1));
            border-color: #ff8c00;
            color: #ff8c00;
        }

        .level-1 { /* 顶层 - 创新共识层 */
            width: 150px;
            height: 60px;
            bottom: 190px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, rgba(255, 69, 0, 0.2), rgba(255, 99, 71, 0.1));
            border-color: #ff4500;
            color: #ff4500;
        }

        .level-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin: 60px 0;
        }

        .detail-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .detail-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(255, 215, 0, 0.2);
        }

        .detail-title {
            font-size: 1.4rem;
            color: #ffd700;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .detail-icon {
            width: 25px;
            height: 25px;
            margin-right: 10px;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
            color: #000;
        }

        .detail-content {
            color: #cccccc;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .detail-metrics {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #ffd700;
        }

        .metric-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-family: 'Courier New', monospace;
        }

        .metric-item:last-child {
            margin-bottom: 0;
        }

        .metric-label {
            color: #ffd700;
        }

        .metric-value {
            color: #00ff00;
        }

        .ckb-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 215, 0, 0.2);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            background: rgba(255, 215, 0, 0.1);
            border-color: rgba(255, 215, 0, 0.5);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #ffd700;
            margin-bottom: 10px;
        }

        .stat-label {
            color: #cccccc;
            font-size: 0.9rem;
        }

        .navigation {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin: 40px 0;
        }

        .nav-button {
            background: linear-gradient(45deg, #1a1a2e, #16213e);
            border: 2px solid #ffd700;
            color: #ffd700;
            padding: 12px 25px;
            border-radius: 20px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .nav-button:hover {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #000;
            transform: scale(1.05);
        }

        .interactive-demo {
            margin: 40px 0;
            text-align: center;
        }

        .demo-button {
            background: linear-gradient(45deg, #ff4500, #ff6347);
            border: none;
            color: white;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .demo-button:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(255, 69, 0, 0.3);
        }

        .demo-result {
            margin-top: 20px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            border: 1px solid rgba(255, 215, 0, 0.3);
            font-family: 'Courier New', monospace;
            color: #00ff00;
            min-height: 100px;
            display: none;
        }

        @media (max-width: 768px) {
            .title {
                font-size: 2rem;
            }
            
            .pyramid {
                width: 300px;
                height: 250px;
            }
            
            .level-3 {
                width: 280px;
                height: 70px;
            }
            
            .level-2 {
                width: 200px;
                height: 60px;
            }
            
            .level-1 {
                width: 120px;
                height: 50px;
            }
            
            .level-details {
                grid-template-columns: 1fr;
            }
            
            .navigation {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 class="title">共识知识库 (CKB)</h1>
            <p class="subtitle">三层金字塔结构的分布式共识知识网络</p>
        </header>

        <section class="pyramid-container">
            <div class="pyramid">
                <div class="pyramid-level level-3" onclick="showLevelDetails(3)">
                    基础共识层 (Foundation Consensus)
                </div>
                <div class="pyramid-level level-2" onclick="showLevelDetails(2)">
                    领域共识层 (Domain Consensus)
                </div>
                <div class="pyramid-level level-1" onclick="showLevelDetails(1)">
                    创新共识层 (Innovation Consensus)
                </div>
            </div>
        </section>

        <section class="ckb-stats">
            <div class="stat-card">
                <div class="stat-number" id="total-igs">0</div>
                <div class="stat-label">总信息基因数</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="coherence-avg">0.00</div>
                <div class="stat-label">平均相干性</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="consensus-level">0</div>
                <div class="stat-label">共识层级</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="validation-rate">0%</div>
                <div class="stat-label">验证通过率</div>
            </div>
        </section>

        <section class="level-details">
            <div class="detail-card">
                <h3 class="detail-title">
                    <div class="detail-icon">基</div>
                    基础共识层 (Level 3)
                </h3>
                <div class="detail-content">
                    存储广泛认可的基础知识和事实，包括数学定理、物理定律、历史事件等。这一层的知识具有最高的稳定性和最低的变异性，是整个CKB的根基。
                </div>
                <div class="detail-metrics">
                    <div class="metric-item">
                        <span class="metric-label">知识条目数量:</span>
                        <span class="metric-value" id="level3-count">0</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">平均稳定性:</span>
                        <span class="metric-value" id="level3-stability">0.00</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">共识阈值:</span>
                        <span class="metric-value">C_coh ≥ 0.8</span>
                    </div>
                </div>
            </div>

            <div class="detail-card">
                <h3 class="detail-title">
                    <div class="detail-icon">域</div>
                    领域共识层 (Level 2)
                </h3>
                <div class="detail-content">
                    涵盖各个专业领域的共识知识，如医学、工程学、社会科学等。这些知识在特定领域内得到广泛认可，但可能存在一定的争议和演化空间。
                </div>
                <div class="detail-metrics">
                    <div class="metric-item">
                        <span class="metric-label">知识条目数量:</span>
                        <span class="metric-value" id="level2-count">0</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">平均稳定性:</span>
                        <span class="metric-value" id="level2-stability">0.00</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">共识阈值:</span>
                        <span class="metric-value">C_coh ≥ 0.6</span>
                    </div>
                </div>
            </div>

            <div class="detail-card">
                <h3 class="detail-title">
                    <div class="detail-icon">创</div>
                    创新共识层 (Level 1)
                </h3>
                <div class="detail-content">
                    包含最新的研究发现、创新理论和前沿技术。这一层的知识变异性最高，需要经过严格的验证过程才能向下层迁移，代表了人类知识的边界。
                </div>
                <div class="detail-metrics">
                    <div class="metric-item">
                        <span class="metric-label">知识条目数量:</span>
                        <span class="metric-value" id="level1-count">0</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">平均稳定性:</span>
                        <span class="metric-value" id="level1-stability">0.00</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">共识阈值:</span>
                        <span class="metric-value">C_coh ≥ 0.4</span>
                    </div>
                </div>
            </div>
        </section>

        <section class="interactive-demo">
            <h3 style="color: #ffd700; margin-bottom: 20px;">交互式演示</h3>
            <button class="demo-button" onclick="simulateKnowledgeFlow()">模拟知识流动</button>
            <button class="demo-button" onclick="validateConsensus()">验证共识过程</button>
            <button class="demo-button" onclick="showMigrationProcess()">展示层级迁移</button>
            
            <div id="demo-result" class="demo-result"></div>
        </section>

        <nav class="navigation">
            <a href="index.html" class="nav-button">返回主页</a>
            <a href="frequency-analysis.html" class="nav-button">频率分析</a>
            <a href="ai-evolution.html" class="nav-button">AI自演化</a>
            <a href="dao-governance.html" class="nav-button">DAO治理</a>
        </nav>
    </div>

    <script>
        // CKB数据模拟
        const ckbData = {
            level3: { count: 1250, stability: 0.95, threshold: 0.8 },
            level2: { count: 3420, stability: 0.78, threshold: 0.6 },
            level1: { count: 5680, stability: 0.45, threshold: 0.4 },
            totalIGs: 10350,
            avgCoherence: 0.72,
            consensusLevel: 2.3,
            validationRate: 87
        };

        // 初始化统计数据
        function initializeStats() {
            document.getElementById('total-igs').textContent = ckbData.totalIGs.toLocaleString();
            document.getElementById('coherence-avg').textContent = ckbData.avgCoherence.toFixed(2);
            document.getElementById('consensus-level').textContent = ckbData.consensusLevel.toFixed(1);
            document.getElementById('validation-rate').textContent = ckbData.validationRate + '%';
            
            document.getElementById('level3-count').textContent = ckbData.level3.count.toLocaleString();
            document.getElementById('level3-stability').textContent = ckbData.level3.stability.toFixed(2);
            
            document.getElementById('level2-count').textContent = ckbData.level2.count.toLocaleString();
            document.getElementById('level2-stability').textContent = ckbData.level2.stability.toFixed(2);
            
            document.getElementById('level1-count').textContent = ckbData.level1.count.toLocaleString();
            document.getElementById('level1-stability').textContent = ckbData.level1.stability.toFixed(2);
        }

        // 显示层级详情
        function showLevelDetails(level) {
            const levels = {
                1: '创新共识层 - 知识边界探索',
                2: '领域共识层 - 专业领域验证', 
                3: '基础共识层 - 稳定知识基石'
            };
            
            const result = document.getElementById('demo-result');
            result.style.display = 'block';
            result.innerHTML = `
                <h4 style="color: #ffd700; margin-bottom: 15px;">${levels[level]}</h4>
                <p>正在分析第${level}层知识库结构...</p>
                <div style="margin-top: 15px;">
                    <div style="background: rgba(255,215,0,0.1); padding: 10px; border-radius: 5px; margin: 5px 0;">
                        信息基因数量: ${ckbData['level' + level].count}
                    </div>
                    <div style="background: rgba(255,215,0,0.1); padding: 10px; border-radius: 5px; margin: 5px 0;">
                        稳定性指数: ${ckbData['level' + level].stability}
                    </div>
                    <div style="background: rgba(255,215,0,0.1); padding: 10px; border-radius: 5px; margin: 5px 0;">
                        共识阈值: C_coh ≥ ${ckbData['level' + level].threshold}
                    </div>
                </div>
            `;
        }

        // 模拟知识流动
        function simulateKnowledgeFlow() {
            const result = document.getElementById('demo-result');
            result.style.display = 'block';
            
            let progress = 0;
            const interval = setInterval(() => {
                progress += 10;
                result.innerHTML = `
                    <h4 style="color: #ffd700; margin-bottom: 15px;">知识流动模拟</h4>
                    <div style="background: rgba(0,255,0,0.1); padding: 10px; border-radius: 5px; margin: 10px 0;">
                        模拟进度: ${progress}%
                    </div>
                    <div style="background: rgba(255,215,0,0.1); padding: 10px; border-radius: 5px; margin: 5px 0;">
                        ${getFlowStatus(progress)}
                    </div>
                `;
                
                if (progress >= 100) {
                    clearInterval(interval);
                    result.innerHTML += `
                        <div style="margin-top: 15px; color: #00ff00;">
                            ✓ 知识流动模拟完成！<br>
                            发现${Math.floor(Math.random() * 50) + 10}个新的信息基因连接<br>
                            优化了${Math.floor(Math.random() * 20) + 5}个现有共识路径
                        </div>
                    `;
                }
            }, 300);
        }

        function getFlowStatus(progress) {
            if (progress < 30) return '正在分析信息基因频率特征...';
            if (progress < 60) return '正在计算频率相干性系数...';
            if (progress < 90) return '正在优化共识路径...';
            return '正在生成新的知识连接...';
        }

        // 验证共识过程
        function validateConsensus() {
            const result = document.getElementById('demo-result');
            result.style.display = 'block';
            
            const randomIGs = Math.floor(Math.random() * 100) + 50;
            const coherence = (Math.random() * 0.4 + 0.4).toFixed(3);
            const validation = coherence > 0.6 ? '通过' : '需优化';
            const validationColor = coherence > 0.6 ? '#00ff00' : '#ff6600';
            
            result.innerHTML = `
                <h4 style="color: #ffd700; margin-bottom: 15px;">共识验证过程</h4>
                <div style="background: rgba(255,215,0,0.1); padding: 10px; border-radius: 5px; margin: 5px 0;">
                    验证样本: ${randomIGs} 个信息基因
                </div>
                <div style="background: rgba(255,215,0,0.1); padding: 10px; border-radius: 5px; margin: 5px 0;">
                    相干性系数: ${coherence}
                </div>
                <div style="background: rgba(255,215,0,0.1); padding: 10px; border-radius: 5px; margin: 5px 0;">
                    验证结果: <span style="color: ${validationColor}; font-weight: bold;">${validation}</span>
                </div>
                <div style="margin-top: 15px; color: #cccccc;">
                    验证标准: C_coh ≥ 0.6 为通过阈值<br>
                    多尺度变异系数: CV = ${(Math.random() * 0.15 + 0.05).toFixed(3)} < 0.2 ✓
                </div>
            `;
        }

        // 展示层级迁移
        function showMigrationProcess() {
            const result = document.getElementById('demo-result');
            result.style.display = 'block';
            
            result.innerHTML = `
                <h4 style="color: #ffd700; margin-bottom: 15px;">层级迁移过程演示</h4>
                <div style="margin: 15px 0;">
                    <div style="background: rgba(255,69,0,0.2); padding: 10px; border-radius: 5px; margin: 8px 0; border-left: 4px solid #ff4500;">
                        <strong>创新共识层 → 领域共识层</strong><br>
                        知识稳定性: 0.45 → 0.78 (↑73%)<br>
                        共识阈值: C_coh ≥ 0.4 → ≥ 0.6<br>
                        预计时间: 6-12个月验证期
                    </div>
                    <div style="background: rgba(255,140,0,0.2); padding: 10px; border-radius: 5px; margin: 8px 0; border-left: 4px solid #ff8c00;">
                        <strong>领域共识层 → 基础共识层</strong><br>
                        知识稳定性: 0.78 → 0.95 (↑22%)<br>
                        共识阈值: C_coh ≥ 0.6 → ≥ 0.8<br>
                        预计时间: 2-5年验证期
                    </div>
                </div>
                <div style="background: rgba(255,215,0,0.1); padding: 10px; border-radius: 5px; margin-top: 15px;">
                    <strong>迁移条件:</strong><br>
                    • 多尺度验证通过 (CV < 0.2)<br>
                    • 持续稳定性监测达标<br>
                    • DAO社区投票通过 (>70%)<br>
                    • 跨领域专家验证确认
                </div>
            `;
        }

        // 页面加载时初始化
        document.addEventListener('DOMContentLoaded', function() {
            initializeStats();
            
            console.log('共识知识库(CKB)三层金字塔结构已加载');
            console.log('当前CKB状态:');
            console.log('- 总信息基因数:', ckbData.totalIGs);
            console.log('- 平均相干性:', ckbData.avgCoherence);
            console.log('- 共识层级:', ckbData.consensusLevel);
            console.log('- 验证通过率:', ckbData.validationRate + '%');
        });
    </script>
</body>
</html>