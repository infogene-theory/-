<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DAOæ²»ç†ç³»ç»Ÿ Â· é¢‘ç‡å…±è¯†é©±åŠ¨çš„å»ä¸­å¿ƒåŒ–è‡ªæ²»</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #1a0033, #330066, #4d0080, #000033);
            color: #ffffff;
            overflow-x: hidden;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 40px 0;
            position: relative;
        }

        .title {
            font-size: 2.8rem;
            font-weight: bold;
            background: linear-gradient(45deg, #ff0080, #8000ff, #0080ff, #00ff80);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradient 6s ease infinite;
            margin-bottom: 20px;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .subtitle {
            font-size: 1.2rem;
            color: #cccccc;
            margin-bottom: 30px;
        }

        .theory-banner {
            background: rgba(255, 0, 128, 0.1);
            border: 2px solid #ff0080;
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
            text-align: center;
            font-family: 'Courier New', monospace;
            font-size: 1rem;
            color: #ff0080;
            backdrop-filter: blur(10px);
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin: 50px 0;
        }

        .governance-panel {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 0, 128, 0.2);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(15px);
        }

        .voting-panel {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(128, 0, 255, 0.2);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(15px);
        }

        .panel-title {
            font-size: 1.5rem;
            color: #ff0080;
            margin-bottom: 25px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .panel-icon {
            width: 30px;
            height: 30px;
            margin-right: 10px;
            background: linear-gradient(45deg, #ff0080, #8000ff);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.8rem;
        }

        /* æ²»ç†æœºåˆ¶å¯è§†åŒ– */
        .governance-visualization {
            height: 250px;
            position: relative;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 15px;
            margin: 20px 0;
            overflow: hidden;
            border: 2px solid rgba(255, 0, 128, 0.3);
        }

        .consensus-network {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .network-node {
            position: absolute;
            width: 12px;
            height: 12px;
            background: radial-gradient(circle, #ff0080, #8000ff);
            border-radius: 50%;
            animation: pulse-node 2s ease-in-out infinite;
        }

        @keyframes pulse-node {
            0%, 100% { transform: scale(1); opacity: 0.6; }
            50% { transform: scale(1.5); opacity: 1; }
        }

        .consensus-link {
            position: absolute;
            height: 2px;
            background: linear-gradient(90deg, transparent, #00ff80, transparent);
            animation: consensus-flow 3s linear infinite;
        }

        @keyframes consensus-flow {
            0% { opacity: 0; transform: scaleX(0); }
            50% { opacity: 1; transform: scaleX(1); }
            100% { opacity: 0; transform: scaleX(0); }
        }

        /* å››å…ƒæ²»ç†æŒ‡æ ‡ */
        .governance-metrics {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 25px 0;
        }

        .governance-metric {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .governance-metric:hover {
            transform: translateY(-5px);
            border-color: rgba(255, 0, 128, 0.5);
            box-shadow: 0 10px 20px rgba(255, 0, 128, 0.2);
        }

        .metric-name {
            color: #ff0080;
            font-size: 0.9rem;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            color: #00ff80;
            margin-bottom: 10px;
            font-family: 'Courier New', monospace;
        }

        .metric-desc {
            color: #cccccc;
            font-size: 0.8rem;
        }

        /* ææ¡ˆç³»ç»Ÿ */
        .proposal-system {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .proposal-title {
            color: #8000ff;
            font-size: 1.3rem;
            margin-bottom: 20px;
            text-align: center;
        }

        .proposal-list {
            max-height: 200px;
            overflow-y: auto;
            margin: 20px 0;
        }

        .proposal-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #ff0080;
            transition: all 0.3s ease;
        }

        .proposal-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        .proposal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .proposal-name {
            color: #ffffff;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .proposal-status {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: bold;
        }

        .status-active { background: rgba(0, 255, 128, 0.2); color: #00ff80; }
        .status-passed { background: rgba(0, 128, 255, 0.2); color: #0080ff; }
        .status-rejected { background: rgba(255, 0, 0, 0.2); color: #ff0000; }

        .proposal-stats {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: #cccccc;
            margin-bottom: 10px;
        }

        .voting-bar {
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
            margin: 8px 0;
        }

        .voting-progress {
            height: 100%;
            background: linear-gradient(90deg, #ff0080, #00ff80);
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        /* æŠ•ç¥¨æ§åˆ¶ */
        .voting-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        .vote-input {
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid rgba(128, 0, 255, 0.3);
            color: #ffffff;
            padding: 10px;
            border-radius: 8px;
            font-size: 0.9rem;
        }

        .vote-input:focus {
            outline: none;
            border-color: #ff0080;
            box-shadow: 0 0 10px rgba(255, 0, 128, 0.3);
        }

        .vote-buttons {
            display: flex;
            gap: 10px;
            margin: 20px 0;
        }

        .vote-button {
            flex: 1;
            background: linear-gradient(45deg, #8000ff, #ff0080);
            border: none;
            color: #ffffff;
            padding: 12px 20px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .vote-button:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(128, 0, 255, 0.3);
        }

        /* æ²»ç†çŠ¶æ€ç›‘æ§ */
        .governance-status {
            background: rgba(0, 255, 128, 0.1);
            border: 2px solid rgba(0, 255, 128, 0.5);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
        }

        .status-title {
            color: #00ff80;
            font-size: 1.3rem;
            margin-bottom: 20px;
            text-align: center;
        }

        .status-indicators {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .status-item {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .status-label {
            color: #cccccc;
            font-size: 0.8rem;
            margin-bottom: 8px;
        }

        .status-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #ff0080;
            font-family: 'Courier New', monospace;
        }

        /* åˆ›å»ºææ¡ˆ */
        .create-proposal {
            background: rgba(255, 0, 128, 0.1);
            border: 2px solid rgba(255, 0, 128, 0.5);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
        }

        .create-title {
            color: #ff0080;
            font-size: 1.3rem;
            margin-bottom: 20px;
            text-align: center;
        }

        .proposal-form {
            display: grid;
            gap: 15px;
        }

        .form-input {
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid rgba(255, 0, 128, 0.3);
            color: #ffffff;
            padding: 12px;
            border-radius: 8px;
            font-size: 0.9rem;
        }

        .form-input:focus {
            outline: none;
            border-color: #ff0080;
            box-shadow: 0 0 10px rgba(255, 0, 128, 0.3);
        }

        .form-textarea {
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid rgba(255, 0, 128, 0.3);
            color: #ffffff;
            padding: 12px;
            border-radius: 8px;
            font-size: 0.9rem;
            min-height: 80px;
            resize: vertical;
        }

        .submit-button {
            background: linear-gradient(45deg, #ff0080, #8000ff);
            border: none;
            color: #ffffff;
            padding: 15px 30px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .submit-button:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(255, 0, 128, 0.3);
        }

        /* æ²»ç†æ—¥å¿— */
        .governance-log {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid rgba(255, 0, 128, 0.3);
        }

        .log-title {
            color: #ff0080;
            font-size: 1.1rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .log-icon {
            width: 20px;
            height: 20px;
            margin-right: 8px;
            background: #ff0080;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
        }

        .log-content {
            font-family: 'Courier New', monospace;
            font-size: 0.8rem;
            color: #00ff80;
            max-height: 200px;
            overflow-y: auto;
        }

        .log-entry {
            margin: 5px 0;
            padding: 3px 0;
            border-bottom: 1px solid rgba(0, 255, 128, 0.1);
        }

        /* å¯¼èˆª */
        .navigation {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin: 60px 0 40px;
        }

        .nav-button {
            background: linear-gradient(45deg, #1a0033, #330066);
            border: 2px solid #ff0080;
            color: #ff0080;
            padding: 15px 30px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-button:hover {
            background: linear-gradient(45deg, #ff0080, #8000ff);
            color: #000;
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(255, 0, 128, 0.3);
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: 30px;
            }
            
            .title {
                font-size: 2.2rem;
            }
            
            .governance-metrics {
                grid-template-columns: 1fr;
            }
            
            .status-indicators {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .voting-controls {
                grid-template-columns: 1fr;
            }
            
            .vote-buttons {
                flex-direction: column;
            }
            
            .navigation {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 class="title">DAOæ²»ç†ç³»ç»Ÿ</h1>
            <p class="subtitle">åŸºäºé¢‘ç‡å…±è¯†ä¸å››å…ƒååŒçš„å»ä¸­å¿ƒåŒ–è‡ªæ²»ç»„ç»‡</p>
        </header>

        <div class="theory-banner">
            <strong>æ²»ç†æœºåˆ¶ï¼š</strong>é¢‘ç‡å…±è¯†æŠ•ç¥¨ + å››å…ƒä»·å€¼è¯„ä¼° + è‡ªæ—‹æƒé‡åˆ†é… + æ¼©æ¶¡å†³ç­–æµ<br>
            <strong>æ•°å­¦åŸºç¡€ï¼š</strong>å…±è¯†åº¦ = Î· Ã— C Ã— f_voteï¼Œå…¶ä¸­ Î· ä¸ºè‡ªæ—‹ä¸€è‡´æ€§ï¼ŒC ä¸ºç›¸å¹²åº¦ï¼Œf_vote ä¸ºæŠ•ç¥¨é¢‘ç‡<br>
            <strong>æ²»ç†ç›®æ ‡ï¼š</strong>å®ç°é«˜ç›¸å¹²åº¦çš„é›†ä½“å†³ç­–ï¼Œé˜²æ­¢ä»·å€¼åç¦»ä¸ç³»ç»Ÿæ€§é£é™©
        </div>

        <div class="main-content">
            <!-- æ²»ç†æœºåˆ¶é¢æ¿ -->
            <div class="governance-panel">
                <h2 class="panel-title">
                    <div class="panel-icon">ğŸ›ï¸</div>
                    æ²»ç†æœºåˆ¶å¯è§†åŒ–
                </h2>

                <div class="governance-visualization">
                    <div class="consensus-network" id="consensus-network">
                        <!-- å…±è¯†ç½‘ç»œå°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>

                <div class="governance-metrics">
                    <div class="governance-metric">
                        <div class="metric-name">å…±è¯†åº¦</div>
                        <div class="metric-value" id="consensus-level">0.00</div>
                        <div class="metric-desc">C_dao = Î· Ã— C Ã— f_c</div>
                    </div>
                    <div class="governance-metric">
                        <div class="metric-name">æŠ•ç¥¨é¢‘ç‡</div>
                        <div class="metric-value" id="voting-frequency">0</div>
                        <div class="metric-desc">f_vote (æ¬¡/å‘¨)</div>
                    </div>
                    <div class="governance-metric">
                        <div class="metric-name">æ²»ç†æ•ˆç‡</div>
                        <div class="metric-value" id="governance-efficiency">0%</div>
                        <div class="metric-desc">å†³ç­–é€šè¿‡ç‡</div>
                    </div>
                    <div class="governance-metric">
                        <div class="metric-name">ä»·å€¼å¯¹é½</div>
                        <div class="metric-value" id="value-alignment">0%</div>
                        <div class="metric-desc">é›†ä½“ä¸€è‡´æ€§</div>
                    </div>
                </div>

                <div class="governance-status">
                    <h3 class="status-title">DAOç³»ç»ŸçŠ¶æ€</h3>
                    <div class="status-indicators">
                        <div class="status-item">
                            <div class="status-label">æ´»è·ƒæˆå‘˜</div>
                            <div class="status-value" id="active-members">0</div>
                        </div>
                        <div class="status-item">
                            <div class="status-label">ææ¡ˆæ€»æ•°</div>
                            <div class="status-value" id="total-proposals">0</div>
                        </div>
                        <div class="status-item">
                            <div class="status-label">é€šè¿‡ææ¡ˆ</div>
                            <div class="status-value" id="passed-proposals">0</div>
                        </div>
                        <div class="status-item">
                            <div class="status-label">æ²»ç†ä»£å¸</div>
                            <div class="status-value" id="governance-tokens">0</div>
                        </div>
                        <div class="status-item">
                            <div class="status-label">è´¨æŠ¼ç‡</div>
                            <div class="status-value" id="staking-rate">0%</div>
                        </div>
                        <div class="status-item">
                            <div class="status-label">é£é™©æŒ‡æ•°</div>
                            <div class="status-value" id="risk-index">0</div>
                        </div>
                    </div>
                </div>

                <div class="create-proposal">
                    <h3 class="create-title">åˆ›å»ºæ–°ææ¡ˆ</h3>
                    <div class="proposal-form">
                        <input type="text" class="form-input" id="proposal-title" placeholder="ææ¡ˆæ ‡é¢˜">
                        <textarea class="form-textarea" id="proposal-description" placeholder="ææ¡ˆæè¿°"></textarea>
                        <select class="form-input" id="proposal-category">
                            <option value="economic">ç»æµæ”¿ç­–</option>
                            <option value="technical">æŠ€æœ¯å‡çº§</option>
                            <option value="governance">æ²»ç†è§„åˆ™</option>
                            <option value="community">ç¤¾åŒºå»ºè®¾</option>
                        </select>
                        <input type="number" class="form-input" id="proposal-duration" placeholder="æŠ•ç¥¨å‘¨æœŸ(å¤©)" min="1" max="30" value="7">
                        <button class="submit-button" onclick="createProposal()">æäº¤ææ¡ˆ</button>
                    </div>
                </div>
            </div>

            <!-- æŠ•ç¥¨é¢æ¿ -->
            <div class="voting-panel">
                <h2 class="panel-title">
                    <div class="panel-icon">ğŸ—³ï¸</div>
                    å®æ—¶æŠ•ç¥¨ç³»ç»Ÿ
                </h2>

                <div class="proposal-system">
                    <h3 class="proposal-title">æ´»è·ƒææ¡ˆ</h3>
                    <div class="proposal-list" id="proposal-list">
                        <!-- ææ¡ˆåˆ—è¡¨å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>

                <div class="voting-controls">
                    <input type="number" class="vote-input" id="vote-amount" placeholder="æŠ•ç¥¨æƒé‡" min="1" max="1000" value="100">
                    <select class="vote-input" id="vote-frequency">
                        <option value="high">é«˜é¢‘æŠ•ç¥¨ (1æ¬¡/å¤©)</option>
                        <option value="medium" selected>ä¸­é¢‘æŠ•ç¥¨ (1æ¬¡/å‘¨)</option>
                        <option value="low">ä½é¢‘æŠ•ç¥¨ (1æ¬¡/æœˆ)</option>
                    </select>
                </div>

                <div class="vote-buttons">
                    <button class="vote-button" onclick="voteYes()">æ”¯æŒææ¡ˆ</button>
                    <button class="vote-button" onclick="voteNo()">åå¯¹ææ¡ˆ</button>
                    <button class="vote-button" onclick="voteAbstain()">å¼ƒæƒ</button>
                </div>

                <div class="governance-log">
                    <h3 class="log-title">
                        <div class="log-icon">ğŸ“Š</div>
                        æ²»ç†æ´»åŠ¨æ—¥å¿—
                    </h3>
                    <div class="log-content" id="governance-log">
                        <div class="log-entry">[ç³»ç»Ÿå¯åŠ¨] DAOæ²»ç†ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆ</div>
                        <div class="log-entry">[å…±è¯†æ ¡å‡†] å››å…ƒæ²»ç†æ¨¡å‹åŸºå‡†è®¾å®šå®Œæˆ</div>
                        <div class="log-entry">[æŠ•ç¥¨å¼€æ”¾] å®æ—¶æŠ•ç¥¨æ¨¡å—å¯åŠ¨æˆåŠŸ</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- å¯¼èˆª -->
        <nav class="navigation">
            <a href="index.html" class="nav-button">è¿”å›ä¸»é¡µ</a>
            <a href="ckb-pyramid.html" class="nav-button">å…±è¯†çŸ¥è¯†åº“</a>
            <a href="frequency-coherence.html" class="nav-button">é¢‘ç‡ç›¸å¹²æ€§</a>
            <a href="ai-evolution.html" class="nav-button">AIè‡ªæ¼”åŒ–</a>
            <a href="economic-system.html" class="nav-button">ç»æµç³»ç»Ÿ</a>
        </nav>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let daoSystem = {
            consensusLevel: 0.75,
            votingFrequency: 7,
            governanceEfficiency: 68.5,
            valueAlignment: 82.3,
            activeMembers: 1247,
            totalProposals: 89,
            passedProposals: 67,
            governanceTokens: 2847300,
            stakingRate: 73.2,
            riskIndex: 0.23,
            spinConsistency: 0.78,
            coherenceLevel: 0.81,
            votingPower: 100
        };

        let proposals = [
            {
                id: 1,
                title: "å¢åŠ AIæ¼”åŒ–å®‰å…¨é¢„ç®—",
                description: "æè®®å°†AIè‡ªæ¼”åŒ–ç³»ç»Ÿçš„å®‰å…¨ç›‘æ§é¢„ç®—æé«˜30%ï¼Œä»¥å¢å¼ºç§©åºé”å®šæœºåˆ¶",
                category: "technical",
                status: "active",
                yesVotes: 156,
                noVotes: 43,
                abstainVotes: 21,
                totalVotes: 220,
                duration: 7,
                remainingDays: 3,
                creator: "0x7423...a9f2",
                createTime: Date.now() - 4 * 24 * 60 * 60 * 1000
            },
            {
                id: 2,
                title: "ä¼˜åŒ–å››å…ƒä»·å€¼è¯„ä¼°æƒé‡",
                description: "è°ƒæ•´ç»æµç³»ç»Ÿä¸­è‡ªæ—‹ã€é¢‘ç‡ã€æ¼©æ¶¡ã€ç›¸å¹²åº¦çš„æƒé‡åˆ†é…æ¯”ä¾‹",
                category: "economic",
                status: "active",
                yesVotes: 189,
                noVotes: 67,
                abstainVotes: 34,
                totalVotes: 290,
                duration: 5,
                remainingDays: 2,
                creator: "0x8a91...e4b7",
                createTime: Date.now() - 3 * 24 * 60 * 60 * 1000
            },
            {
                id: 3,
                title: "å»ºç«‹è·¨å°ºåº¦éªŒè¯æ ‡å‡†",
                description: "åˆ¶å®šç»Ÿä¸€çš„è·¨å°ºåº¦ç›¸å¹²åº¦éªŒè¯æ ‡å‡†ï¼Œç¡®ä¿ç³»ç»Ÿä¸€è‡´æ€§",
                category: "governance",
                status: "active",
                yesVotes: 234,
                noVotes: 28,
                abstainVotes: 15,
                totalVotes: 277,
                duration: 10,
                remainingDays: 6,
                creator: "0x5f62...c1d9",
                createTime: Date.now() - 4 * 24 * 60 * 60 * 1000
            }
        ];

        let currentProposalId = 1;
        let governanceLog = [];

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            generateConsensusNetwork();
            updateProposalList();
            updateGovernanceDisplay();
            startGovernanceSimulation();
            addLogEntry('DAOæ²»ç†ç³»ç»Ÿå¯åŠ¨ - åŸºäºIGT v10.0å››å…ƒç»Ÿä¸€æ¡†æ¶');
        });

        // ç”Ÿæˆå…±è¯†ç½‘ç»œå¯è§†åŒ–
        function generateConsensusNetwork() {
            const network = document.getElementById('consensus-network');
            network.innerHTML = '';
            
            // ç”ŸæˆèŠ‚ç‚¹
            const nodes = [];
            const centerX = 50;
            const centerY = 50;
            const radius = 35;
            
            // ä¸­å¿ƒèŠ‚ç‚¹ï¼ˆæ ¸å¿ƒæ²»ç†ï¼‰
            const centerNode = document.createElement('div');
            centerNode.className = 'network-node';
            centerNode.style.left = centerX + '%';
            centerNode.style.top = centerY + '%';
            centerNode.style.width = '16px';
            centerNode.style.height = '16px';
            centerNode.style.background = 'radial-gradient(circle, #ff0080, #ff0040)';
            network.appendChild(centerNode);
            
            // å¤–å›´èŠ‚ç‚¹ï¼ˆæˆå‘˜èŠ‚ç‚¹ï¼‰
            for (let i = 0; i < 12; i++) {
                const angle = (i / 12) * 2 * Math.PI;
                const x = centerX + radius * Math.cos(angle);
                const y = centerY + radius * Math.sin(angle);
                
                const node = document.createElement('div');
                node.className = 'network-node';
                node.style.left = x + '%';
                node.style.top = y + '%';
                node.style.animationDelay = (i * 0.2) + 's';
                
                // æ ¹æ®èŠ‚ç‚¹ä½ç½®è®¾ç½®ä¸åŒçš„é¢œè‰²å¼ºåº¦
                const intensity = 0.6 + 0.4 * Math.cos(angle * 3);
                node.style.opacity = intensity;
                
                network.appendChild(node);
                nodes.push({element: node, x, y, angle});
                
                // åˆ›å»ºè¿æ¥çº¿
                const link = document.createElement('div');
                link.className = 'consensus-link';
                
                const dx = x - centerX;
                const dy = y - centerY;
                const length = Math.sqrt(dx * dx + dy * dy);
                const angle_deg = Math.atan2(dy, dx) * 180 / Math.PI;
                
                link.style.left = centerX + '%';
                link.style.top = centerY + '%';
                link.style.width = length + '%';
                link.style.transform = `rotate(${angle_deg}deg)`;
                link.style.transformOrigin = 'left center';
                link.style.animationDelay = (i * 0.1) + 's';
                
                network.appendChild(link);
            }
        }

        // æ›´æ–°ææ¡ˆåˆ—è¡¨
        function updateProposalList() {
            const proposalList = document.getElementById('proposal-list');
            proposalList.innerHTML = '';
            
            proposals.forEach(proposal => {
                const proposalItem = document.createElement('div');
                proposalItem.className = 'proposal-item';
                proposalItem.onclick = () => selectProposal(proposal.id);
                
                const approvalRate = proposal.yesVotes / proposal.totalVotes * 100;
                const statusClass = proposal.status === 'active' ? 'status-active' : 
                                  proposal.status === 'passed' ? 'status-passed' : 'status-rejected';
                
                proposalItem.innerHTML = `
                    <div class="proposal-header">
                        <div class="proposal-name">${proposal.title}</div>
                        <div class="proposal-status ${statusClass}">${getStatusText(proposal.status)}</div>
                    </div>
                    <div class="proposal-stats">
                        <span>æ”¯æŒ: ${proposal.yesVotes}</span>
                        <span>åå¯¹: ${proposal.noVotes}</span>
                        <span>å¼ƒæƒ: ${proposal.abstainVotes}</span>
                        <span>å‰©ä½™: ${proposal.remainingDays}å¤©</span>
                    </div>
                    <div class="voting-bar">
                        <div class="voting-progress" style="width: ${approvalRate}%"></div>
                    </div>
                    <div style="font-size: 0.8rem; color: #888; margin-top: 5px;">
                        é€šè¿‡ç‡: ${approvalRate.toFixed(1)}% | åˆ›å»ºè€…: ${proposal.creator}
                    </div>
                `;
                
                proposalList.appendChild(proposalItem);
            });
        }

        // è·å–çŠ¶æ€æ–‡æœ¬
        function getStatusText(status) {
            const statusMap = {
                'active': 'è¿›è¡Œä¸­',
                'passed': 'å·²é€šè¿‡',
                'rejected': 'å·²å¦å†³'
            };
            return statusMap[status] || 'æœªçŸ¥';
        }

        // é€‰æ‹©ææ¡ˆ
        function selectProposal(proposalId) {
            currentProposalId = proposalId;
            const proposal = proposals.find(p => p.id === proposalId);
            if (proposal) {
                addLogEntry(`é€‰ä¸­ææ¡ˆ: "${proposal.title}" (ID: ${proposalId})`);
                // å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ æ›´å¤šé€‰ä¸­åçš„æ“ä½œ
            }
        }

        // æŠ•ç¥¨æ”¯æŒ
        function voteYes() {
            const voteAmount = parseInt(document.getElementById('vote-amount').value) || 0;
            if (voteAmount <= 0) {
                addLogEntry('âŒ æŠ•ç¥¨æƒé‡å¿…é¡»å¤§äº0');
                return;
            }
            
            const proposal = proposals.find(p => p.id === currentProposalId);
            if (!proposal || proposal.status !== 'active') {
                addLogEntry('âš ï¸ è¯·é€‰æ‹©æœ‰æ•ˆçš„æ´»è·ƒææ¡ˆ');
                return;
            }
            
            // è®¡ç®—æŠ•ç¥¨å½±å“åŠ›ï¼ˆåŸºäºå››å…ƒæ²»ç†æ¨¡å‹ï¼‰
            const influence = calculateVotingInfluence(voteAmount, 'yes');
            proposal.yesVotes += influence.votes;
            proposal.totalVotes += influence.votes;
            
            addLogEntry(`ğŸŸ¢ æ”¯æŒæŠ•ç¥¨: æƒé‡${voteAmount} â†’ å½±å“åŠ›${influence.votes} (å…±è¯†åº¦${influence.consensus.toFixed(3)})`);
            updateProposalList();
            updateGovernanceDisplay();
        }

        // æŠ•ç¥¨åå¯¹
        function voteNo() {
            const voteAmount = parseInt(document.getElementById('vote-amount').value) || 0;
            if (voteAmount <= 0) {
                addLogEntry('âŒ æŠ•ç¥¨æƒé‡å¿…é¡»å¤§äº0');
                return;
            }
            
            const proposal = proposals.find(p => p.id === currentProposalId);
            if (!proposal || proposal.status !== 'active') {
                addLogEntry('âš ï¸ è¯·é€‰æ‹©æœ‰æ•ˆçš„æ´»è·ƒææ¡ˆ');
                return;
            }
            
            const influence = calculateVotingInfluence(voteAmount, 'no');
            proposal.noVotes += influence.votes;
            proposal.totalVotes += influence.votes;
            
            addLogEntry(`ğŸ”´ åå¯¹æŠ•ç¥¨: æƒé‡${voteAmount} â†’ å½±å“åŠ›${influence.votes} (å…±è¯†åº¦${influence.consensus.toFixed(3)})`);
            updateProposalList();
            updateGovernanceDisplay();
        }

        // å¼ƒæƒæŠ•ç¥¨
        function voteAbstain() {
            const voteAmount = parseInt(document.getElementById('vote-amount').value) || 0;
            if (voteAmount <= 0) {
                addLogEntry('âŒ æŠ•ç¥¨æƒé‡å¿…é¡»å¤§äº0');
                return;
            }
            
            const proposal = proposals.find(p => p.id === currentProposalId);
            if (!proposal || proposal.status !== 'active') {
                addLogEntry('âš ï¸ è¯·é€‰æ‹©æœ‰æ•ˆçš„æ´»è·ƒææ¡ˆ');
                return;
            }
            
            const influence = calculateVotingInfluence(voteAmount, 'abstain');
            proposal.abstainVotes += influence.votes;
            proposal.totalVotes += influence.votes;
            
            addLogEntry(`âšª å¼ƒæƒæŠ•ç¥¨: æƒé‡${voteAmount} â†’ å½±å“åŠ›${influence.votes} (å…±è¯†åº¦${influence.consensus.toFixed(3)})`);
            updateProposalList();
            updateGovernanceDisplay();
        }

        // è®¡ç®—æŠ•ç¥¨å½±å“åŠ›ï¼ˆåŸºäºå››å…ƒæ²»ç†æ¨¡å‹ï¼‰
        function calculateVotingInfluence(voteAmount, voteType) {
            // åŸºç¡€æŠ•ç¥¨æƒé‡
            let baseVotes = Math.floor(voteAmount / 10); // æ¯10ä¸ªä»£å¸å¯¹åº”1ç¥¨
            
            // å››å…ƒæ²»ç†åŠ æˆ
            const spinBonus = daoSystem.spinConsistency * 0.3; // è‡ªæ—‹ä¸€è‡´æ€§åŠ æˆ
            const coherenceBonus = daoSystem.coherenceLevel * 0.4; // ç›¸å¹²åº¦åŠ æˆ
            const consensusBonus = daoSystem.consensusLevel * 0.3; // å…±è¯†åº¦åŠ æˆ
            
            const totalBonus = 1 + spinBonus + coherenceBonus + consensusBonus;
            const finalVotes = Math.floor(baseVotes * totalBonus);
            
            // æŠ•ç¥¨ç±»å‹å½±å“å…±è¯†åº¦
            let consensusImpact = 0;
            if (voteType === 'yes') {
                consensusImpact = 0.01 * daoSystem.coherenceLevel;
            } else if (voteType === 'no') {
                consensusImpact = -0.01 * (1 - daoSystem.coherenceLevel);
            }
            
            return {
                votes: finalVotes,
                consensus: consensusImpact,
                bonus: totalBonus
            };
        }

        // åˆ›å»ºæ–°ææ¡ˆ
        function createProposal() {
            const title = document.getElementById('proposal-title').value.trim();
            const description = document.getElementById('proposal-description').value.trim();
            const category = document.getElementById('proposal-category').value;
            const duration = parseInt(document.getElementById('proposal-duration').value) || 7;
            
            if (!title || !description) {
                addLogEntry('âŒ ææ¡ˆæ ‡é¢˜å’Œæè¿°ä¸èƒ½ä¸ºç©º');
                return;
            }
            
            if (title.length < 5 || description.length < 20) {
                addLogEntry('âš ï¸ æ ‡é¢˜è‡³å°‘5å­—ç¬¦ï¼Œæè¿°è‡³å°‘20å­—ç¬¦');
                return;
            }
            
            const newProposal = {
                id: proposals.length + 1,
                title: title,
                description: description,
                category: category,
                status: 'active',
                yesVotes: 0,
                noVotes: 0,
                abstainVotes: 0,
                totalVotes: 0,
                duration: duration,
                remainingDays: duration,
                creator: "0x" + Math.random().toString(16).substr(2, 8) + "..." + Math.random().toString(16).substr(2, 4),
                createTime: Date.now()
            };
            
            proposals.push(newProposal);
            daoSystem.totalProposals++;
            
            addLogEntry(`ğŸ“ æ–°ææ¡ˆåˆ›å»º: "${title}" (ç±»åˆ«: ${getCategoryText(category)})`);
            addLogEntry(`ğŸ“Š æŠ•ç¥¨å‘¨æœŸ: ${duration}å¤© | åˆ›å»ºè€…: ${newProposal.creator}`);
            
            // æ¸…ç©ºè¡¨å•
            document.getElementById('proposal-title').value = '';
            document.getElementById('proposal-description').value = '';
            
            updateProposalList();
            updateGovernanceDisplay();
        }

        // è·å–ç±»åˆ«æ–‡æœ¬
        function getCategoryText(category) {
            const categoryMap = {
                'economic': 'ç»æµæ”¿ç­–',
                'technical': 'æŠ€æœ¯å‡çº§',
                'governance': 'æ²»ç†è§„åˆ™',
                'community': 'ç¤¾åŒºå»ºè®¾'
            };
            return categoryMap[category] || 'å…¶ä»–';
        }

        // æ›´æ–°æ²»ç†æ˜¾ç¤º
        function updateGovernanceDisplay() {
            // è®¡ç®—æ²»ç†æŒ‡æ ‡
            const totalVotes = proposals.reduce((sum, p) => sum + p.totalVotes, 0);
            const passedCount = proposals.filter(p => p.status === 'passed').length;
            
            daoSystem.governanceEfficiency = daoSystem.totalProposals > 0 ? 
                (passedCount / daoSystem.totalProposals * 100) : 0;
            
            daoSystem.valueAlignment = daoSystem.coherenceLevel * daoSystem.consensusLevel * 100;
            
            // é£é™©æŒ‡æ•°è®¡ç®—
            daoSystem.riskIndex = (1 - daoSystem.consensusLevel) * 0.4 + 
                                (1 - daoSystem.coherenceLevel) * 0.3 + 
                                (1 - daoSystem.stakingRate / 100) * 0.3;
            
            // æ›´æ–°æ˜¾ç¤º
            document.getElementById('consensus-level').textContent = daoSystem.consensusLevel.toFixed(3);
            document.getElementById('voting-frequency').textContent = daoSystem.votingFrequency;
            document.getElementById('governance-efficiency').textContent = daoSystem.governanceEfficiency.toFixed(1) + '%';
            document.getElementById('value-alignment').textContent = daoSystem.valueAlignment.toFixed(1) + '%';
            
            document.getElementById('active-members').textContent = daoSystem.activeMembers.toLocaleString();
            document.getElementById('total-proposals').textContent = daoSystem.totalProposals;
            document.getElementById('passed-proposals').textContent = passedCount;
            document.getElementById('governance-tokens').textContent = daoSystem.governanceTokens.toLocaleString();
            document.getElementById('staking-rate').textContent = daoSystem.stakingRate.toFixed(1) + '%';
            document.getElementById('risk-index').textContent = daoSystem.riskIndex.toFixed(3);
        }

        // å¼€å§‹æ²»ç†æ¨¡æ‹Ÿ
        function startGovernanceSimulation() {
            setInterval(() => {
                // éšæœºæ³¢åŠ¨æ²»ç†å‚æ•°
                daoSystem.consensusLevel += (Math.random() - 0.5) * 0.02;
                daoSystem.coherenceLevel += (Math.random() - 0.5) * 0.015;
                daoSystem.spinConsistency += (Math.random() - 0.5) * 0.01;
                
                // é™åˆ¶èŒƒå›´
                daoSystem.consensusLevel = Math.max(0, Math.min(1, daoSystem.consensusLevel));
                daoSystem.coherenceLevel = Math.max(0, Math.min(1, daoSystem.coherenceLevel));
                daoSystem.spinConsistency = Math.max(0, Math.min(1, daoSystem.spinConsistency));
                
                // æ›´æ–°æ´»è·ƒæˆå‘˜æ•°
                daoSystem.activeMembers += Math.floor((Math.random() - 0.5) * 10);
                daoSystem.activeMembers = Math.max(100, Math.min(2000, daoSystem.activeMembers));
                
                // æ›´æ–°ææ¡ˆå‰©ä½™å¤©æ•°
                proposals.forEach(proposal => {
                    if (proposal.status === 'active') {
                        proposal.remainingDays = Math.max(0, proposal.remainingDays - 0.01);
                        
                        // æ£€æŸ¥æ˜¯å¦åˆ°æœŸ
                        if (proposal.remainingDays <= 0) {
                            const approvalRate = proposal.yesVotes / proposal.totalVotes;
                            proposal.status = approvalRate >= 0.6 ? 'passed' : 'rejected';
                            
                            addLogEntry(`ğŸ“‹ ææ¡ˆç»“æŸ: "${proposal.title}" â†’ ${proposal.status === 'passed' ? 'âœ… é€šè¿‡' : 'âŒ å¦å†³'}`);
                            addLogEntry(`ğŸ“Š æœ€ç»ˆæŠ•ç¥¨: æ”¯æŒ${proposal.yesVotes} | åå¯¹${proposal.noVotes} | é€šè¿‡ç‡${(approvalRate * 100).toFixed(1)}%`);
                        }
                    }
                });
                
                updateGovernanceDisplay();
                
                // å¶å°”æ·»åŠ éšæœºäº‹ä»¶
                if (Math.random() < 0.05) {
                    const events = [
                        'æ–°æˆå‘˜åŠ å…¥DAOæ²»ç†',
                        'æ²»ç†ä»£å¸è´¨æŠ¼å¢åŠ ',
                        'ææ¡ˆè®¨è®ºçƒ­åº¦ä¸Šå‡',
                        'å…±è¯†è¾¾æˆæ•ˆç‡æå‡'
                    ];
                    const event = events[Math.floor(Math.random() * events.length)];
                    addLogEntry(`ğŸŒŸ æ²»ç†åŠ¨æ€: ${event}`);
                }
            }, 5000);
        }

        // æ·»åŠ æ—¥å¿—æ¡ç›®
        function addLogEntry(message) {
            const logContent = document.getElementById('governance-log');
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            
            logContent.appendChild(entry);
            logContent.scrollTop = logContent.scrollHeight;
            
            // ä¿æŒæœ€å¤š30æ¡è®°å½•
            const entries = logContent.querySelectorAll('.log-entry');
            if (entries.length > 30) {
                entries[0].remove();
            }
        }
    </script>
</body>
</html>